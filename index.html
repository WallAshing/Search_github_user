<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Git user search</title>
</head>
<body>
      <main>
            <form action="" method="POST">
                  <input type="text" placeholder="Search a github user" name="username" id="searchInput">
                  <button id="submit">Search!</button>
            </form>

            <div id="result">

            </div>
      </main>

      
      <script type="module">
            import { Octokit } from "https://cdn.skypack.dev/@octokit/core";
            
            const octokit = new Octokit({ auth: `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` });
            
            const resultDiv = document.getElementById("result");

            
            
            async function Search(e){
                  e.preventDefault();
                  console.log("click");
                  let username = document.getElementById("searchInput").value;
                  console.log(username);
                        let user = await octokit.request('GET /search/users',{
                              q:username,
                        });
                        console.log(user.data.items[0]);

                        let title = document.createElement("h1");
                        let titleContent = document.createTextNode("Search Result")
                        title.appendChild(titleContent);
                        resultDiv.append(title);

                        let p = document.createElement("p");
                        p.innerHTML = "User name : " + user.data.items[0].login;
                        resultDiv.append(p);
                        
                        let a = document.createElement("a");
                        a.innerHTML = "Github Link";
                        a.href = user.data.items[0].html_url;
                        a.title = "github link";
                        resultDiv.append(a);
            }

            document.getElementById("submit").addEventListener("click", Search)
            
      </script>
      <script></script>

</body>
</html>

